<!-- laser_filters.launch
     Gigatron laser range filter launch file

     @author  Syler Wagner  <syler@mit.edu>

     @date    2016-03-04    syler   creation
     @date    2016-09-07    syler   added laser angle filter

     This launch file filters laser scans and removes all points above a threshold distance.
     Config file is located in gigatron/laser_range_filter_config.yaml

     Usage Instructions:
     1. In a terminal window, run:
        roslaunch gigatron_hardware laser_filters.launch
    -->

    <launch>

    <arg name="range" default="true" />
    <arg name="angle" default="true" />
    <arg name="shadow" default="true" />

    <!-- filter scan to forward 180 degrees -->
    <node if="$(arg range)" pkg="laser_filters" type="scan_to_scan_filter_chain" name="laser_range_filter" >
        <rosparam command="load" file="$(find gigatron_hardware)/config/sensors/laser_range_filter_config.yaml" />
        <remap from="base_scan" to="scan" />
        <remap from="scan_filtered" to="scan_stop" />
    </node>

    <!-- filter range too close -->
    <node if="$(arg angle)" pkg="laser_filters" type="scan_to_scan_filter_chain" name="laser_angle_filter">
        <rosparam command="load" file="$(find gigatron_hardware)/config/sensors/laser_angle_filter_config.yaml" />
        <remap from="input_scan" to="scan" />
        <remap from="scan_filtered" to="scan_forward" />
    </node>

    <!-- filter to remove shadows -->
    <node if="$(arg shadow)" pkg="laser_filters" type="scan_to_scan_filter_chain" name="laser_shadow_filter">
        <rosparam command="load" file="$(find gigatron_hardware)/config/sensors/laser_shadow_filter_config.yaml" />
        <remap from="scan" to="scan_forward" />
        <remap from="scan_filtered" to="scan_no_shadows" />
    </node>
</launch>
